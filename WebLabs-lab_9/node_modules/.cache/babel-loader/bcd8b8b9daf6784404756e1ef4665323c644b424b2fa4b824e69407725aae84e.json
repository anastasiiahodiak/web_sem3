{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/\\u0410\\u043D\\u0430\\u0441\\u0442\\u0430\\u0441\\u0456\\u044F \\u0413\\u043E\\u0434\\u044F\\u043A/politex/sem3/web/lab9/WebLabs-lab_9/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/\\u0410\\u043D\\u0430\\u0441\\u0442\\u0430\\u0441\\u0456\\u044F \\u0413\\u043E\\u0434\\u044F\\u043A/politex/sem3/web/lab9/WebLabs-lab_9/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/\\u0410\\u043D\\u0430\\u0441\\u0442\\u0430\\u0441\\u0456\\u044F \\u0413\\u043E\\u0434\\u044F\\u043A/politex/sem3/web/lab9/WebLabs-lab_9/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React from\"react\";import CardItem from\"../../components/CardItem\";import{useState,useEffect}from\"react\";import{CardWrapper}from\"../Home/Home.styled\";import{getShips,getFilteredShips}from\"../../service/api\";import Loader from\"../Loader/Loader\";import{Button}from\"antd\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var MainCatalog=function MainCatalog(_ref){var filters=_ref.filters,shipsList=_ref.shipsList;var _useState=useState(shipsList),_useState2=_slicedToArray(_useState,2),filteredShips=_useState2[0],setFilteredShips=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),isLoading=_useState4[0],setIsLoading=_useState4[1];var _useState5=useState(true),_useState6=_slicedToArray(_useState5,2),filtersApplied=_useState6[0],setFiltersApplied=_useState6[1];var handleFiltersApply=function handleFiltersApply(){setFiltersApplied(true);};useEffect(function(){var fetchFilteredShips=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var result;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return getFilteredShips(filters);case 3:result=_context.sent;setFilteredShips(result);setFiltersApplied(false);_context.next=11;break;case 8:_context.prev=8;_context.t0=_context[\"catch\"](0);console.error(\"Error fetching filtered ships:\",_context.t0);case 11:case\"end\":return _context.stop();}},_callee,null,[[0,8]]);}));return function fetchFilteredShips(){return _ref2.apply(this,arguments);};}();if(filtersApplied){fetchFilteredShips();setFiltersApplied(false);}},[filters,filtersApplied]);return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{style:{display:\"flex\",justifyContent:\"center\",marginTop:50},children:/*#__PURE__*/_jsx(Button,{onClick:handleFiltersApply,children:\"Apply and Search\"})}),/*#__PURE__*/_jsxs(CardWrapper,{children:[isLoading?/*#__PURE__*/_jsx(Loader,{}):\"\",filteredShips.map(function(ship){return/*#__PURE__*/_jsx(CardItem,{id:ship.id,title:ship.title,text:ship.text,image:ship.image,price:ship.price},ship.id);})]})]});};export default MainCatalog;","map":{"version":3,"names":["React","CardItem","useState","useEffect","CardWrapper","getShips","getFilteredShips","Loader","Button","jsx","_jsx","jsxs","_jsxs","MainCatalog","_ref","filters","shipsList","_useState","_useState2","_slicedToArray","filteredShips","setFilteredShips","_useState3","_useState4","isLoading","setIsLoading","_useState5","_useState6","filtersApplied","setFiltersApplied","handleFiltersApply","fetchFilteredShips","_ref2","_asyncToGenerator","_regeneratorRuntime","mark","_callee","result","wrap","_callee$","_context","prev","next","sent","t0","console","error","stop","apply","arguments","children","style","display","justifyContent","marginTop","onClick","map","ship","id","title","text","image","price"],"sources":["C:/Users/Анастасія Годяк/politex/sem3/web/lab9/WebLabs-lab_9/src/containers/MainCatalog1/MainCatalog.js"],"sourcesContent":["import React from \"react\";\nimport CardItem from \"../../components/CardItem\";\nimport { useState, useEffect } from \"react\";\nimport { CardWrapper } from \"../Home/Home.styled\";\nimport { getShips, getFilteredShips } from \"../../service/api\";\nimport Loader from \"../Loader/Loader\"\nimport { Button } from \"antd\";\n\nconst MainCatalog = ({ filters, shipsList }) => {\n  const [filteredShips, setFilteredShips] = useState(shipsList);\n  const [isLoading,setIsLoading] = useState(false)\n  const [filtersApplied,setFiltersApplied] = useState(true)\n\n  const handleFiltersApply= ()=>{\n        setFiltersApplied(true)\n  }\n  useEffect(() => {\n   \n    const fetchFilteredShips = async () => {\n      try {\n        const result = await getFilteredShips(filters);\n        setFilteredShips(result);\n        setFiltersApplied(false)\n      } catch (error) {\n        console.error(\"Error fetching filtered ships:\", error);\n      }\n    };\n\n    if (filtersApplied) {\n      fetchFilteredShips();\n      setFiltersApplied(false)\n    }\n  }, [filters,filtersApplied]);\n\n\n\n  return (\n    \n    <div >\n      <div style={{display:\"flex\" ,justifyContent:\"center\",marginTop:50}}>\n        <Button onClick={handleFiltersApply}>Apply and Search</Button>\n      </div>\n   \n    <CardWrapper>  \n      {isLoading ?<Loader/>:\"\"}\n      {filteredShips.map((ship) => (\n        <CardItem\n          id={ship.id}\n          key={ship.id}\n          title={ship.title}\n          text={ship.text}\n          image={ship.image}\n          price={ship.price}\n        />\n      ))}\n    </CardWrapper>\n    </div>\n  );\n};\n\nexport default MainCatalog;\n         "],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}